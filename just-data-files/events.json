[null,{"name":"onStart","temp":"","event-type":"1","_id":"gjXaV","actions":[{"behavior":"3","name":"Run Action Sequence Once"},{"info":"0","find":"335407595890409472","storage":"1","varName":"server","name":"Find Server"},{"server":"1","varName":"server","name":"Change Server"},{"activity":"2","nameText":"for spammers","url":"","stat":"0","name":"Set Bot Activity"},{"info":"1","find":"bot-log","storage":"3","varName":"bot-log","name":"Find Channel"},{"info":"1","find":"warn-log","storage":"3","varName":"warn-log","name":"Find Channel"},{"info":"1","find":"mod-alerts","storage":"3","varName":"mod-area","name":"Find Channel"},{"info":"1","find":"join-log","storage":"3","varName":"join-log","name":"Find Channel"},{"info":"0","find":"569302852053368832","storage":"3","varName":"bug-report-queue","name":"Find Channel"},{"info":"0","find":"569320815833776128","storage":"3","varName":"bug-reports","name":"Find Channel"},{"info":"1","find":"DBM Helper","storage":"3","varName":"helper-role","name":"Find Role"},{"info":"1","find":"DBM Expert","storage":"3","varName":"expert-role","name":"Find Role"},{"info":"1","find":"DBM Mod","storage":"3","varName":"mod-role","name":"Find Role"},{"roleName":"","hoist":"none","mentionable":"true","color":"","position":"","storage":"5","varName":"helper-role","name":"Edit Role"},{"roleName":"","hoist":"none","mentionable":"true","color":"","position":"","storage":"5","varName":"expert-role","name":"Edit Role"},{"behavior":"0","interpretation":"0","code":"tempVars(\"server\").fetchMembers()","storage":"0","varName":"","name":"Run Script"},{"behavior":"0","interpretation":"0","code":"client.on('error', (error) => {    \n  if(error.message == 'Unexpected server response: 520'){\n    console.log(\"Cant connect to Discords API, Retrying...\");\n  }else if(error.message == 'read ECONNRESET'){\n    console.log(\"Connection Reset! Reconnecting...\");\n  }else{\n    console.error(error);\n  }            \n});","storage":"0","varName":"","name":"Run Script"},{"behavior":"0","interpretation":"0","code":"client.on('userUpdate', async function (oldUser, newUser) {\n  if (oldUser.displayName !== newUser.displayName) {\n    const nick = newUser.displayName.replace(/^[^a-zA-Z]+/gi, '')\n    if (nick !== newUser.displayName) await newUser.setNickname(nick || 'hoister', 'Auto dehoist')\n  }\n})","storage":"0","varName":"","name":"Run Script"},{"behavior":"0","interpretation":"0","code":"client.on('guildMemberAdd', async function (member) { \n  const nick = member.displayName.replace(/^[^a-zA-Z]+/gi, '')\n    if (nick !== member.displayName) {\n      await member.setNickname(nick || 'hoister', 'Auto dehoist (join)')\n    }\n})","storage":"0","varName":"","name":"Run Script"},{"channel":"7","varName":"bot-log","message":"*Bot restarted* (case id: ${serverVars(\"case_id\")})","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"}]},{"name":"[Init] Init Database","temp":"","event-type":"1","_id":"qYxGu","actions":[{"behavior":"3","name":"Run Action Sequence Once"},{"source":"hSDWO","type":"true","name":"Call Command/Event"},{"tosend":"Connected with Database!","name":"Send Message to Console"}]},{"name":"[Store] SQL Connection","permissions":"NONE","restriction":"0","_id":"hSDWO","actions":[{"storage":"1","stringifyOutput":"0","varName":"","hostname":"159.242.64.36","port":"3306","username":"XXXXXXXXXXXXXXXXX","password":"XXXXXXXXXXXXXXXX","database":"XXXXXXXXXXXXXXXX","query":"CREATE TABLE IF NOT EXISTS `infonames` (\n  `id` int(50),\n  `name` varchar(30),\n  `friendly_name` varchar(50),\n  `content` TEXT(1024),\n  `image_link` varchar(50),\n  `views` int(8),\n  PRIMARY KEY (`name`)\n) DEFAULT CHARSET=utf8;","path":"","otype":"0","source_conn_storage":"0","source_conn_varName":"","store_source_conn_storage":"3","store_source_conn_varName":"database-connection","debugMode":"0","name":"Run SQL Query"},{"storage":"3","varName":"database-connection","name":"Save Variable"},{"comment":"","color":"#000000","name":"Comment"}],"comType":"0","event-type":"1"},{"name":"LogMessageEdit","temp":"oldmsg","event-type":"26","_id":"OFecO","actions":[{"message":"1","varName":"oldmsg","info":"2","storage":"1","varName2":"oldmsgtxt","name":"Store Message Info"},{"message":"1","varName":"newmsg","info":"2","storage":"1","varName2":"newmsgtxt","name":"Store Message Info"},{"storage":"1","varName":"oldmsgtxt","comparison":"1","value":"tempVars(\"newmsgtxt\")","iftrue":"1","iftrueVal":"","iffalse":"0","iffalseVal":"","name":"Check Variable"},{"message":"1","varName":"newmsg","info":"3","storage":"1","varName2":"author","name":"Store Message Info"},{"title":"","author":"${tempVars(\"author\").user.username}","color":"4286f4","timestamp":"true","url":"","authorIcon":"${tempVars(\"author\").user.displayAvatarURL}","imageUrl":"","thumbUrl":"","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","message":"[Beam me up, Scotty](https://discordapp.com/channels/335407595890409472/${tempVars(\"newmsg\").channel.id}/${tempVars(\"newmsg\").id})","name":"Set Embed Description"},{"storage":"1","varName":"oldmsgtxt","comparison":"7","value":"1024","iftrue":"0","iftrueVal":"","iffalse":"3","iffalseVal":"2","name":"Check Variable"},{"storage":"1","varName":"embed","fieldName":"Before","message":"[Too long]","inline":"0","name":"Add Embed Field"},{"count":"1","name":"Skip Actions"},{"storage":"1","varName":"embed","fieldName":"Before","message":"${tempVars(\"oldmsgtxt\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"newmsgtxt","comparison":"7","value":"1024","iftrue":"0","iftrueVal":"","iffalse":"3","iffalseVal":"2","name":"Check Variable"},{"storage":"1","varName":"embed","fieldName":"After","message":"[Too long]","inline":"0","name":"Add Embed Field"},{"count":"1","name":"Skip Actions"},{"storage":"1","varName":"embed","fieldName":"After","message":"${tempVars(\"newmsgtxt\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed","message":"In #${tempVars(\"newmsg\").channel.name} | ID: ${tempVars(\"newmsg\").id}","footerIcon":"","name":"Set Embed Footer"},{"storage":"1","varName":"embed","channel":"7","varName2":"bot-log","storage3":"0","varName3":"","name":"Send Embed Message"},{"comment":"v Invite? => BANNED v","color":"#000000","name":"Comment"},{"storage":"1","varName":"newmsgtxt","comparison":"6","value":"(discord.gg/|discordapp.com/invite|discord.me/)","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"storage":"1","varName":"newmsg","name":"Delete Message"},{"channel":"7","varName":"mod-area","message":"${tempVars(\"author\")} edited a message and added an invite! (#${tempVars(\"channel_na\")})\n`${tempVars(\"newmsg\")}`","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"}],"temp2":"newmsg"},{"name":"MemberWarn","temp":"","event-type":"0","_id":"warn","actions":[{"title":"Warning - ${tempVars(\"user\").user.tag} - Case #${serverVars(\"case_id\")}","author":"","color":"018dbc","timestamp":"true","url":"","authorIcon":"","imageUrl":"","thumbUrl":"","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","fieldName":"User","message":"${tempVars(\"user\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed","fieldName":"New Points","message":"${tempVars(\"points\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed","fieldName":"Total Points","message":"${tempVars(\"totalpoints\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed","fieldName":"Reason","message":"${tempVars(\"reason\")}","inline":"1","name":"Add Embed Field"},{"storage":"1","varName":"embed","message":"Warned by ${member.user.tag}","footerIcon":"","name":"Set Embed Footer"},{"storage":"1","varName":"embed","channel":"7","varName2":"warn-log","storage3":"0","varName3":"","name":"Send Embed Message"},{"title":"Hey ${tempVars(\"user\").user.tag}! - Case #${serverVars(\"case_id\")}","author":"","color":"ff0000","timestamp":"false","url":"","authorIcon":"","imageUrl":"","thumbUrl":"","storage":"1","varName":"player-embed","name":"Create Embed Message"},{"storage":"1","varName":"player-embed","message":"You have been warned by a member of staff. Please see our rules in <#345694151607582732>. Per our policies after 5 warnings your account will be banned pending an appeal; you can appeal by messaging us [here](https://dbm-support.site/).","name":"Set Embed Description"},{"storage":"1","varName":"player-embed","fieldName":"Reason","message":"${tempVars(\"reason\")}","inline":"1","name":"Add Embed Field"},{"storage":"1","varName":"points","comparison":"1","value":"0","iftrue":"0","iftrueVal":"2","iffalse":"3","iffalseVal":"2","name":"Check Variable"},{"storage":"1","varName":"player-embed","fieldName":"No Warning Points","message":"The Moderator decided to give you no warning points but this is still a warning!","inline":"1","name":"Add Embed Field"},{"count":"2","name":"Skip Actions"},{"storage":"1","varName":"player-embed","fieldName":"New points","message":"${tempVars(\"points\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"player-embed","fieldName":"Total Points","message":"${tempVars(\"totalpoints\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"player-embed","message":"If you have questions regarding your warning contact ${member.user.tag}","footerIcon":"","name":"Set Embed Footer"},{"storage":"1","varName":"player-embed","channel":"5","varName2":"user","storage3":"0","varName3":"","name":"Send Embed Message"}]},{"name":"MemberKick","temp":"","event-type":"0","_id":"kick","actions":[{"title":"Kick - ${tempVars(\"user\").user.tag} - Case #${serverVars(\"case_id\")}","author":"","color":"ce6412","timestamp":"true","url":"","authorIcon":"","imageUrl":"","thumbUrl":"","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","fieldName":"User","message":"${tempVars(\"user\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed","fieldName":"New Points","message":"${tempVars(\"points\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed","fieldName":"Total Points","message":"${tempVars(\"totalpoints\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed","fieldName":"Reason","message":"${tempVars(\"reason\")}","inline":"1","name":"Add Embed Field"},{"storage":"1","varName":"embed","message":"Warned by ${member.user.tag}","footerIcon":"","name":"Set Embed Footer"},{"storage":"1","varName":"embed","channel":"7","varName2":"warn-log","storage3":"0","varName3":"","name":"Send Embed Message"},{"behavior":"0","interpretation":"0","code":"tempVars(\"user\").send(`**Hey ${tempVars(\"user\").user.tag}!** - Case #${serverVars(\"case_id\")}\nYou just got kicked from the Discord Bot Maker server with the reason:\n*${tempVars(\"reason\")}*\nYou recieved ${tempVars(\"points\")} new warning point(s). You have ${tempVars(\"totalpoints\")} warning point(s) now.\nPlease make sure to follow the rules. You can rejoin with the linked Invite in DBM.`).catch(() => msg.channel.send(\"Kicked user. and btw, they blocked their DMs.\"))","storage":"0","varName":"","name":"Run Script"},{"time":"2","measurement":"1","name":"Wait"},{"member":"2","varName":"user","reason":"${tempVars(\"reason\")} | by ${member.user.username} | Case: ${serverVars(\"case_id\")}","name":"Kick Member"}]},{"name":"MemberBan","temp":"","event-type":"0","_id":"ban","actions":[{"title":"Ban - ${tempVars(\"user\").user.tag} - Case #${serverVars(\"case_id\")}","author":"","color":"ff0000","timestamp":"true","url":"","authorIcon":"","imageUrl":"","thumbUrl":"","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","fieldName":"User","message":"${tempVars(\"user\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed","fieldName":"New Points","message":"${tempVars(\"points\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed","fieldName":"Total Points","message":"${tempVars(\"totalpoints\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed","fieldName":"Reason","message":"${tempVars(\"reason\")}","inline":"1","name":"Add Embed Field"},{"storage":"1","varName":"embed","message":"Warned by ${member.user.tag}","footerIcon":"","name":"Set Embed Footer"},{"storage":"1","varName":"embed","channel":"7","varName2":"warn-log","storage3":"0","varName3":"","name":"Send Embed Message"},{"behavior":"0","interpretation":"0","code":"tempVars(\"user\").send(`**Hey ${tempVars(\"user\").user.tag}!** - Case #${serverVars(\"case_id\")}\nYou just got banned from the Discord Bot Maker server with the reason:\n`*${tempVars(\"reason\")}*`\nYou recieved ${tempVars(\"points\")} new warning point(s) (${tempVars(\"totalpoints\")} points in total).\n\nIf you don't agree with this punishment, you may appeal at https://dbm-support.site/index.php?a=add&category=8&custom4=${tempVars(\"member\").user.id}&custom5=${serverVars(\"case_id\")}`).catch(() => msg.channel.send(\"Banned user. and btw, they blocked their DMs.\"))","storage":"0","varName":"","name":"Run Script"},{"time":"2","measurement":"1","name":"Wait"},{"member":"2","varName":"user","reason":"${tempVars(\"reason\")} | by ${member.user.username} | Case: ${serverVars(\"case_id\")}","name":"Ban Member"}]},{"name":"CaseSendCheck","temp":"","event-type":"0","_id":"KOifU","actions":[{"time":"5","measurement":"1","name":"Wait"},{"storage":"1","stringifyOutput":"1","varName":"res","hostname":"","port":"","username":"","password":"","database":"","query":"SELECT * FROM `warnings` WHERE `case_id` = \"${serverVars(\"case_id\")}\"","path":"","otype":"0","source_conn_storage":"3","source_conn_varName":"database-connection","store_source_conn_storage":"0","store_source_conn_varName":"","debugMode":"1","name":"Run SQL Query"},{"channel":"7","varName":"bot-log","message":"${tempVars(\"res\")}","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"},{"storage":"1","varName":"res","comparison":"5","value":"user_id","iftrue":"3","iftrueVal":"2","iffalse":"0","iffalseVal":"","name":"Check Variable"},{"channel":"7","varName":"warn-log","message":"❗ Failed to add to database. <@268737698397814784>?","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"},{"name":"End Action Sequence"},{"channel":"7","varName":"warn-log","message":"✅ Added to database","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"}]},{"name":"onError","temp":"err","event-type":"37","_id":"tzruX","actions":[{"title":"Bot -> RIP!","author":"","color":"","timestamp":"false","url":"","authorIcon":"","imageUrl":"","thumbUrl":"","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","message":"The bot (maybe) still works. This is only an error.","name":"Set Embed Description"},{"storage":"1","varName":"embed","fieldName":"DBM Error:","message":"${tempVars(\"err\")}","inline":"1","name":"Add Embed Field"},{"channel":"7","varName":"bot-log","message":"<@268737698397814784>","storage":"0","varName2":"","name":"Send Message"},{"storage":"1","varName":"embed","channel":"7","varName2":"bot-log","storage3":"0","varName3":"","name":"Send Embed Message"},{"channel":"7","varName":"bot-log","message":"```${tempVars(\"jserr\")}```","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"}],"temp2":"jserr"},{"name":"LoadCustomScripts","temp":"dbm_error","event-type":"1","_id":"opBsf","actions":[{"behavior":"0","interpretation":"0","code":"if(!globalVars(\"scripts_loaded\")){ \n    require('./custom.js')({DBM: this.getDBM(),Actions, Files, Events, tempVars, serverVars, globalVars},client)    \n    this.storeValue(true, 3, \"scripts_loaded\", cache)\n}\n\n","storage":"0","varName":"","name":"Run Script"}],"temp2":"js_error"},{"name":"onMemberJoin","temp":"mem","event-type":"6","_id":"PPTCU","actions":[{"behavior":"0","interpretation":"0","code":"client.fetchUser(tempVars(\"mem\").id);","storage":"0","varName":"","name":"Run Script"},{"comment":"v Ban check v","color":"#000000","name":"Comment"},{"storage":"1","stringifyOutput":"0","varName":"pending-totalpoints","hostname":"","port":"","username":"","password":"","database":"","query":"SELECT `user_id`, SUM(points) AS `points` FROM `warnings` WHERE `user_id` = ${tempVars(\"mem\").user.id}","path":"","otype":"0","source_conn_storage":"3","source_conn_varName":"database-connection","store_source_conn_storage":"0","store_source_conn_varName":"","debugMode":"0","name":"Run SQL Query"},{"behavior":"0","interpretation":"0","code":"var points = tempVars(\"pending-totalpoints\")[0].points;\nconsole.log(points);\n\nif(points !== null && typeof points !== \"object\") {\nthis.storeValue(points, 1, \"totalpoints\", cache);\n} else {\nthis.storeValue(\"0\", 1, \"totalpoints\", cache);\n}","storage":"0","varName":"","name":"Run Script"},{"storage":"1","varName":"totalpoints","comparison":"4","value":"4","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"channel":"7","varName":"mod-area","message":"Going to ban ${tempVars(\"mem\")} (${tempVars(\"mem\").user.id}) now. They have ${tempVars(\"totalpoints\")} points and just joined!","storage":"1","varName2":"msg","iffalse":"0","iffalseVal":"","name":"Send Message"},{"channel":"5","varName":"mem","message":"You have been banned manually. Please contact us on https://dbm-support.site if you think your ban is wrong.","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"},{"member":"2","varName":"mem","reason":"Manual set by moderator!","name":"Ban Member"},{"storage":"1","varName":"msg","emoji":"4","varName2":"😤","varName3":"","name":"Add Reaction"}]},{"name":"WarnByMessage","temp":"reaction","event-type":"28","_id":"Faqmq","actions":[{"storage":"1","varName":"emoji","comparison":"1","value":"'⚠'","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"reaction":"1","varName":"reaction","info":"7","storage":"1","varName2":"user","name":"Store Reaction Info"},{"reaction":"1","varName":"reaction","info":"3","storage":"1","varName2":"emoji","name":"Store Reaction Info"},{"reaction":"1","varName":"reaction","info":"0","storage":"1","varName2":"message","name":"Store Reaction Info"},{"storage":"1","varName":"reporthash","min":"1000","max":"9999","name":"Generate Random Number"},{"server":"0","varName":"","dataName":"report_${tempVars(\"reporthash\")}","comparison":"0","value":"","iftrue":"1","iftrueVal":"","iffalse":"0","iffalseVal":"","name":"Check Server Data"},{"server":"0","varName":"","dataName":"report_${tempVars(\"reporthash\")}","changeType":"0","value":"1","name":"Control Server Data"},{"server":"0","varName":"","dataName":"report_${tempVars(\"reporthash\")}_type","changeType":"0","value":"1","name":"Control Server Data"},{"member":"2","varName":"user","dataName":"report_cooldown","comparison":"1","value":"1","iftrue":"1","iftrueVal":"","iffalse":"0","iffalseVal":"","name":"Check Member Data"},{"member":"2","varName":"user","dataName":"report_cooldown","changeType":"0","value":"1","name":"Control Member Data"},{"comment":"^ check ^","color":"#000000","name":"Comment"},{"message":"1","varName":"message","info":"4","storage":"1","varName2":"channel","name":"Store Message Info"},{"channel":"5","varName":"channel","message":"⚠ The message has been reported. Thank you for your report ${tempVars(\"user\")}.","storage":"0","varName2":"","name":"Send Message"},{"message":"1","varName":"message","info":"3","storage":"1","varName2":"author","name":"Store Message Info"},{"message":"1","varName":"message","info":"2","storage":"1","varName2":"content","name":"Store Message Info"},{"server":"0","varName":"","dataName":"report_${tempVars(\"reporthash\")}_url","changeType":"0","value":"`https://discordapp.com/channels/335407595890409472/${tempVars(\"channel\").id}/${tempVars(\"message\").id}`","name":"Control Server Data"},{"server":"0","varName":"","dataName":"report_${tempVars(\"reporthash\")}_userid","changeType":"0","value":"tempVars(\"author\").id","name":"Control Server Data"},{"comment":"^ store ^","color":"#000000","name":"Comment"},{"title":"Message Report","author":"${tempVars(\"user\").user.username}","color":"RED","timestamp":"false","url":"https://discordapp.com/channels/335407595890409472/${tempVars(\"channel\").id}/${tempVars(\"message\").id}","authorIcon":"${tempVars(\"user\").user.displayAvatarURL}","imageUrl":"","thumbUrl":"","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","fieldName":"Perpetrator","message":"${tempVars(\"author\")} (${tempVars(\"author\").user.id})","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed","fieldName":"Reported by ","message":"${tempVars(\"user\")} (${tempVars(\"user\").id})","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"content","comparison":"0","value":"","iftrue":"3","iftrueVal":"1","iffalse":"0","iffalseVal":"","name":"Check Variable"},{"storage":"1","varName":"content","changeType":"0","value":"\"*Text not available*\"","name":"Control Variable"},{"storage":"1","varName":"embed","fieldName":"Text","message":"${tempVars(\"content\")}\n[Link](https://discordapp.com/channels/335407595890409472/${tempVars(\"channel\").id}/${tempVars(\"message\").id})","inline":"1","name":"Add Embed Field"},{"storage":"1","varName":"embed","message":"ID: ${tempVars(\"reporthash\")}","footerIcon":"https://cdn.discordapp.com/emojis/478692305138745344.gif?v=1","name":"Set Embed Footer"},{"storage":"1","varName":"embed","channel":"7","varName2":"reports-channel","storage3":"1","varName3":"staff-embed","name":"Send Embed Message"},{"time":"15","measurement":"2","name":"Wait"},{"member":"2","varName":"user","dataName":"report_cooldown","changeType":"0","value":"0","name":"Control Member Data"},{"member":"2","varName":"user","permission":"ADMINISTRATOR","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Member Permissions"}]}]